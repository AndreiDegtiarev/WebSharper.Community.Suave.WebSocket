(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;a=window;b=a.WebSharper=a.WebSharper||{};c=b.UI=b.UI||{};d=c.Next=c.Next||{};e=d.CSharp=d.CSharp||{};f=e.ViewExtensions=e.ViewExtensions||{};g=e.DocExtension=e.DocExtension||{};h=e.Client=e.Client||{};i=h.Helpers=h.Helpers||{};j=h.RouteMapBuilder=h.RouteMapBuilder||{};k=h.RouteItemParsers=h.RouteItemParsers||{};l=d&&d.View;m=d&&d.Doc;n=d&&d.Var;o=b&&b.List;p=a.IntelliFactory;q=p&&p.Runtime;r=d&&d.RouteMap;s=b&&b.Seq;t=b&&b.Unchecked;u=b&&b.Arrays;v=b&&b.Collections;w=v&&v.FSharpMap;x=b&&b.Option;y=v&&v.Map;z=b&&b.Nullable;A=b&&b.Operators;f.UpdateWhile=function(B,C,D){return l.UpdateWhile(C,D,B);};g.DocSeqCached=function(B,C,D){var E;E=function(F,G){return D(F,G);};return m.ConvertSeqBy(C,function(F){return function(G){return E(F,G);};},B);};i.seqRefToListRef=function(B){var C;C=function(D,E){return E;};return n.Lens(B,o.ofSeq,function(D,E){return C(D,E);});};j=h.RouteMapBuilder=q.Class({Install:function(){var B,C,D,E,F;B=this.ToRouteMap();C=r.Install(B);D=(E=function(G,H){return G(function(I){return n.Set(C,I);},H);},function(G){return o.map(function(H){return function(I){return E(H,I);};},G);}(o.rev(this.renders)));F=C.v;return m.BindView(function(G){return s.pick(function(H){return H(G);},D);},F);},ToRouteMap:function(){var B,C;B=o.rev(this.links);C=o.rev(this.routes);return r.CreateWithQuery(function(D){return s.pick(function(E){return E(D);},B);},function(D){return s.pick(function(E){return E(D);},C);});},AddRender:function(B){this.renders=new o.T({$:1,$0:B,$1:this.renders});},AddLink:function(B){this.links=new o.T({$:1,$0:B,$1:this.links});},AddRoute:function(B){this.routes=new o.T({$:1,$0:B,$1:this.routes});}},null,j);j.New=q.Ctor(function(){this.links=new o.T({$:0});this.routes=new o.T({$:0});this.renders=new o.T({$:0});},j);k["System.Double"]=function(B){var C,D,E,F,G;C=B[0];return C.$==1?(D=C.$0,(E=C.$1,(F=(new a.RegExp("^[0-9](?:\\.[0-9]*)?$")).exec(D),t.Equals(F,null)?null:{$:1,$0:[(G=u.get(F,0),a.parseFloat(G)),E]}))):null;};k["System.Int32"]=function(B){var C,D,E,F,G;C=B[0];return C.$==1?(D=C.$0,(E=C.$1,(F=(new a.RegExp("^[0-9]+$")).exec(D),t.Equals(F,null)?null:{$:1,$0:[(G=u.get(F,0),a.parseInt(G,a.$1)),E]}))):null;};k["System.String"]=function(B){var C;C=B[0];return C.$==1?{$:1,$0:[C.$0,C.$1]}:null;};k.MakeLink=function(B){return function(C){var D,E,F,G,H,I,J,K,L;return B.$==1?(D=B.$1,(E=B.$2,(F=[new w.New([])],[o.append(x.toList(D),o.ofSeq((G=function(M,N,O,P){var Q,R,S,T,U,V,W;return t.Equals(N,0)?(Q=P(C[M]),(R=Q[1],(S=Q[0],(F[0]=y.FoldBack(function(X,Y,Z){return Z.Add(X,Y);},R,F[0]),S)))):t.Equals(N,1)?(T=o.head((P(C[M]))[0]),(F[0]=F[0].Add(M,T),new o.T({$:0}))):t.Equals(N,2)?(U=C[M],(U!=null?U.$==1:false)?(V=U.$0,F[0]=F[0].Add(M,o.head((P(V))[0]))):void 0,new o.T({$:0})):t.Equals(N,3)?(W=C[M],(W!=null?F[0]=F[0].Add(M,o.head((P(z.get(W)))[0])):void 0,new o.T({$:0}))):A.FailWith("invalid QueryItem enum value");},function(M){return s.collect(function(N){return G(N[0],N[1],N[2],N[3]);},M);}(E)))),F[0]]))):B.$==2?(H=B.$2,[new o.T({$:1,$0:a.String(s.length(C)),$1:o.ofSeq((I=(J=function(M){return M[0];},function(M){return J(H(M));}),function(M){return s.collect(I,M);}(C)))}),new w.New([])]):B.$==3?(K=B.$0,[o.ofSeq(s.concat(((L=function(M,N){return function(O){return(N(O))[0];};},(q.Curried3(s.map2))(function(M,N){return(function(O){return L(O[0],O[1]);}(M))(N);}))(K))(C))),new w.New([])]):[o.ofArray([a.String(C)]),new w.New([])];};};k.ParseRoute=function(B){var C,D,E;C=k.ParseShape(B);D=(E=function(F,G){return G.$==0?{$:1,$0:F}:null;},function(F){return F==null?null:E.apply(null,F.$0);});return function(F){return D(C(F));};};k.ParseShape=function(B){return function(C){var D,E,F,G,H,I,J,K,L,M,N,O,P;function Q(R,S,T){var U,V,W;U=R();V=function(X){return[U,X];};return function(X){return X==null?null:{$:1,$0:V(X.$0)};}(((W=function(X,Y){var Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$;Z=Y[0];_0=Y[1];_1=Y[2];return(X!=null?X.$==1:false)?(_2=X.$0,t.Equals(_0,0)?(_3=_1([_2,E]),(_3!=null?_3.$==1:false)?(_4=_3.$0[1],(U[Z]=_3.$0[0],{$:1,$0:_4})):null):t.Equals(_0,1)?(_5=y.TryFind(Z,E),_5==null?null:(U[Z]=_5.$0,{$:1,$0:_2})):t.Equals(_0,2)?(_6=y.TryFind(Z,E),(_6!=null?_6.$==1:false)?(_7=_6.$0,(_8=_1([o.ofArray([_7]),new w.New([])]),(_8!=null?_8.$==1:false)?(U[Z]={$:1,$0:_8.$0[0]},{$:1,$0:_2}):null)):(U[Z]=null,{$:1,$0:_2})):t.Equals(_0,3)?(_9=y.TryFind(Z,E),(_9!=null?_9.$==1:false)?(_=_9.$0,($=_1([o.ofArray([_]),new w.New([])]),($!=null?$.$==1:false)?(U[Z]=$.$0[0],{$:1,$0:_2}):null)):(U[Z]=null,{$:1,$0:_2})):A.FailWith("invalid QueryItem enum value")):null;},(q.Curried3(u.fold))(W))({$:1,$0:S}))(T));}D=C[0];E=C[1];return B.$==1?B.$1==null?Q(B.$0,D,B.$2):(F=B.$2,(G=B.$0,(H=B.$1.$0,(D.$==1?D.$0===H?(I=[D.$1,D.$0],true):false:false)?Q(G,I[0],F):null))):B.$==2?(J=B.$0,(K=B.$1,(L=function(R,S){var T;T=u.create(R,null);return function(U,V){var W,X,Y;while(true)if(U===R)return{$:1,$0:[J(T),V]};else{W=K([V,E]);if(W!=null?W.$==1:false){X=W.$0[1];Y=W.$0[0];u.set(T,U,Y);U=U+1;V=X;}else return null;}}(0,S);},function(R){return R==null?null:L.apply(null,R.$0);}(k["System.Int32"]([D,E]))))):B.$==3?(M=B.$0,(N=a.Array.prototype.constructor.apply(a.Array,[]),(O=function(R){return[N,R];},function(R){return R==null?null:{$:1,$0:O(R.$0)};}(((P=function(R,S){var T,U;T=S[0];U=function(V){var W;W=function(X,Y){var Z;Z=N.push(X);return Y;};return function(X){return X==null?null:{$:1,$0:W.apply(null,X.$0)};}(T([V,E]));};return function(V){return V==null?null:U(V.$0);}(R);},(q.Curried3(u.fold))(P))({$:1,$0:D}))(M))))):B.$0([D,E]);};};}());
